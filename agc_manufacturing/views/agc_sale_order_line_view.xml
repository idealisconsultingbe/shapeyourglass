<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="sale_order_line_view_form_product_manufacture_spec" model="ir.ui.view">
        <field name="name">sale.order.line.form.product.manufacture.spec</field>
        <field name="model">sale.order.line</field>
        <field name="arch" type="xml">
            <form name="product_manuf_spec">
                <sheet>
                    <field name="configuration_is_done" invisible="1"/>
                    <group name="main">
                        <group name="sub_main_data">
                            <field name="finished_product_quantity"/>
                        </group>
                        <group name="cost">
                            <field name="finished_product_unit_cost" attrs="{'invisible': [('configuration_is_done', '!=', True)]}" string="Unit Cost"/>
                        </group>
                    </group>
                    <field name="product_manufacture_spec_ids">
                        <tree create="false" editable="bottom">
                            <field name="sale_order_state" invisible="1"/>
                            <field name="configuration_is_done" invisible="1"/>
                            <field name="product_id" readonly="1"/>
                            <field name="bom_id" string="BoM"/>
                            <field name="bom_efficiency" string="Yield (%)"/>
                            <field name="routing_id"/>
                            <field name="routing_efficiency_id" string="Complexity"/>
                            <field name="price_unit" readonly="1"/>
                        </tree>
                    </field>
                </sheet>
                <footer>
                    <!--                    TODO add action on this button-->
                    <button string="Compute Cost" class='btn-primary' attrs="{'invisible': [('configuration_is_done', '!=', True)]}"/>
                </footer>
            </form>
        </field>
    </record>

    <record id="sale_order_line_confirmed_view_form_product_manufacture_spec" model="ir.ui.view">
        <field name="name">sale.order.line.confirmed.form.product.manufacture.spec</field>
        <field name="model">sale.order.line</field>
        <field name="arch" type="xml">
            <form name="product_manuf_spec">
                <sheet>
                    <field name="configuration_is_done" invisible="1"/>
                    <group name="main">
                        <group name="sub_main_data">
                            <field name="finished_product_quantity" readonly="1"/>
                        </group>
                        <group name="cost">
                            <field name="finished_product_unit_cost" string="Unit Cost" readonly="1"/>
                        </group>
                    </group>
                    <field name="product_manufacture_spec_ids">
                        <tree create="false" editable="bottom">
                            <field name="sale_order_state" invisible="1"/>
                            <field name="configuration_is_done" invisible="1"/>
                            <field name="product_id" readonly="1"/>
                            <field name="bom_id" string="BoM" readonly="1"/>
                            <field name="bom_efficiency" string="Yield (%)" readonly="1"/>
                            <field name="routing_id" readonly="1"/>
                            <field name="routing_efficiency_id" string="Complexity" readonly="1"/>
                            <field name="price_unit" readonly="1"/>
                            <field name="purchase_id" string="PO" readonly="1"/>
                            <field name="production_id" string="MO" readonly="1"/>
                            <field name="production_status" string="Status" readonly="1"/>
                        </tree>
                    </field>
                </sheet>
                <footer>
                    <!--                    TODO add action on this button-->
                    <button string="Compute Cost" class='btn-primary'/>
                </footer>
            </form>
        </field>
    </record>
</odoo>